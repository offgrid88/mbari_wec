<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../../img/favicon.ico">
  <title>Run the Simulator - MBARI-WEC</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>
  <link href='https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Run the Simulator";
    var mkdocs_page_input_path = "Tutorials/Simulation/RunSimulator.md";
    var mkdocs_page_url = "/Tutorials/Simulation/RunSimulator/";
  </script>
  
  <script src="../../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../../.." class="icon icon-home"> MBARI-WEC</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="tocbase current">
    
    
      


  <li class="navtree toctree-l1 inactive">
    <a class="" href="../../..">Home</a>
  </li>
    
      


  <li class="navtree toctree-l1 inactive">
    <a class="" href="../../../architecture/">Architecture</a>
  </li>
    
      


  <li class="navtree toctree-l1 inactive">
    <a class="" href="../../../ControlAndTelemetry/">Buoy Control and Telemetry</a>
  </li>
    
      


  <li class="navtree toctree-l1 inactive">
    <a class="" href="../../../atseaoperation/">At Sea Operation</a>
  </li>
    
      


  <li class="navtree toctree-l1 inactive">
    <a class="" href="../../../ros2/">ROS 2 Interface</a>
  </li>
    
      


  <li class="navtree toctree-l1 inactive">
    <a class="" href="../../../simulation/">Simulation</a>
  </li>
    
      
  <li class="navtree toctree-l1 label">
    <p class="caption">Tutorials</p>
  </li>


  

  
    <li class="navtree toctree-l1 group">
      <ul class="navtree subnav-l1 current">
          
  <li class="navtree toctree-l2 label">
    <p class="caption">Installation</p>
  </li>


  

  
    <li class="navtree toctree-l2 group">
      <ul class="navtree subnav-l2 current">
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../../Install/Install_source/">Install from source</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../../Install/Install_docker/">Install using Docker</a>
  </li>
        
      </ul>
    </li>
        
          
  <li class="navtree toctree-l2 label">
    <p class="caption">Running the Simulator</p>
  </li>


  

  
    <li class="navtree toctree-l2 group">
      <ul class="navtree subnav-l2 current">
          


  
    
    <li class="navtree toctree-l3 page current">
      <a class="current" href="./">
        Run the Simulator
      </a>
    </li>
    
      

  <li class="toctree-l3 current with-children">
    <a href="#introduction">
      Introduction
      <span class="toctree-expand"></span>
    </a>
  </li>



      

  <li class="toctree-l3">
    <a href="#how-to-run">
      How to Run
      <span class="toctree-expand"></span>
    </a>
  </li>



      

  <li class="toctree-l3">
    <a href="#notes-on-workspaces">
      Notes on Workspaces
      <span class="toctree-expand"></span>
    </a>
  </li>




  
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../SimulatorOutputROS/">View ROS 2 Messages</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../SimulatorOutputPlotjuggler/">View ROS 2 Messages with Plotjuggler</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../SimulatorOutputLogs/">Simulator Output Data Logs</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../SimulatorInteractionPbcmd/">Control Simulator with pbcmd</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../SimulatorParameters/">Adjust Simulator parameters</a>
  </li>
        
      </ul>
    </li>
        
          
  <li class="navtree toctree-l2 label">
    <p class="caption">Adding Control Code</p>
  </li>


  

  
    <li class="navtree toctree-l2 group">
      <ul class="navtree subnav-l2 current">
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../../ROS2/MessagesAndServices/">ROS 2 Messages and Services</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../../ROS2/PythonTemplate/">Controller GitHub Template (Python)</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../../ROS2/CPPTemplate/">Controller GitHub Template (C++)</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../../ROS2/PythonLinearDamperExample/">Linear Damper Example (Python)</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../../ROS2/CppLinearDamperExample/">Linear Damper Example (C++)</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../../ROS2/CPPOpenLoopControl/">Open-Loop Force Command Example (C++)</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../../ROS2/PythonOpenLoopControl/">Open-Loop Force Command Example (Python)</a>
  </li>
        
          


  <li class="navtree toctree-l3 inactive">
    <a class="" href="../../ROS2/ClosedLoopControl/">Closed-Loop Control</a>
  </li>
        
      </ul>
    </li>
        
      </ul>
    </li>
    
      


  <li class="navtree toctree-l1 inactive">
    <a class="" href="../../../theory/">Theory</a>
  </li>
    
      


  <li class="navtree toctree-l1 inactive">
    <a class="" href="../../../resources/">Resources</a>
  </li>
    
      


  <li class="navtree toctree-l1 inactive">
    <a class="" href="../../../license/">License</a>
  </li>
    
      


  <li class="navtree toctree-l1 inactive">
    <a class="" href="../../../citation/">How to Cite</a>
  </li>
    
      


  <li class="navtree toctree-l1 inactive">
    <a class="" href="../../../roadmap/">Project Roadmap</a>
  </li>
    
  </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../..">MBARI-WEC</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../..">Docs</a> &raquo;</li>
    
      
        
          <li>Running the Simulator &raquo;</li>
        
      
        
          <li>Tutorials &raquo;</li>
        
      
    
    <li>Run the Simulator</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permanent link">&para;</a></h2>
<p>This tutorial will illustrate how to start the buoy simulation in Gazebo, when the simulation is running, a rendering of the buoy system motions will be visible, and ROS2 messages will be published that represent the buoy systems state.  The simulation also provides the same ROS2 services the real buoy does, so will respond to ROS2 messages appropriately.</p>
<p>Subsequent tutorials will illustrate how to view and plot data being published by the simulation, view data logs being generated, and control the simulated buoy with the command-line tool that is available on the buoy.</p>
<h2 id="how-to-run">How to Run<a class="headerlink" href="#how-to-run" title="Permanent link">&para;</a></h2>
<p>To run the simulator, it is necessary to source the workspace in a separate terminal than was used to build the application.  Therefore, open a new terminal window and do the following:</p>
<ol>
<li>Source the workspace
<div class="highlight"><pre><span></span><code>$ . ~/mbari_wec_ws/install/setup.sh
</code></pre></div></li>
<li>Launch the simulation
<div class="highlight"><pre><span></span><code>$ ros2 launch buoy_gazebo mbari_wec.launch.py 
</code></pre></div></li>
</ol>
<p>The Gazebo rendering of the buoy system should become visible and appear as follows:</p>
<p><img alt="here" src="../images/BuoyGazebo.png" /></p>
<p>To start the simulation, press the "play" arrow in the lower left, the buoy should start to move in response to incoming waves.</p>
<p>It is also possible to adjust various parameters such as the sea-state, visibility of the rendering, and speed the simulation will run relative to real-time.  These topics are covered in a later tutorial.</p>
<p>To view the ROS2 messages and associated data while the simulation runs, proceed to the next tutorial: <a href="../SimulatorOutputROS/">View ROS2 Messages</a></p>
<h2 id="notes-on-workspaces">Notes on Workspaces<a class="headerlink" href="#notes-on-workspaces" title="Permanent link">&para;</a></h2>
<p>The step of sourcing the workspace is important and must be done in every window that the simulation and associated tools are accessed from.  It is possible, and possibly convenient, to put the source command from step 1 above in the .bashrc or similar place if a different shell is being used.  This will automatically perform this step anytime a new window is opened.  Beware however, the software can not be built from source in a window where this workspace has previously been sourced.  So when re-compiling the source often it can be problematic to have this line in .bashrc.  When primarily running the simulations without frequent re-building of the software, it is then appropriate to use .bashrc in this way, just remember to take it out before opening a window where you want to do a "colcon build".</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../SimulatorOutputROS/" class="btn btn-neutral float-right" title="View ROS 2 Messages">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../../Install/Install_docker/" class="btn btn-neutral" title="Install using Docker"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../../Install/Install_docker/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../SimulatorOutputROS/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
      <script src="../../../search/main.js" defer></script>

</body>
</html>
