<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://example.com/Tutorials/ROS2/PythonTemplate/" />
      <link rel="shortcut icon" href="../../../img/favicon.ico" />
    <title>Quick Start -- Writing External Controller With Github Template Repository - MBARI-WEC</title>
    <link rel="stylesheet" href="../../../css/theme.css" />
    <link rel="stylesheet" href="../../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "Quick Start -- Writing External Controller With Github Template Repository";
        var mkdocs_page_input_path = "Tutorials/ROS2/PythonTemplate.md";
        var mkdocs_page_url = "/Tutorials/ROS2/PythonTemplate/";
      </script>
    
    <script src="../../../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../../.." class="icon icon-home"> MBARI-WEC
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../..">Home</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../architecture/">Architecture</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../ControlAndTelemetry/">Buoy Control and Telemetry</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../ros2/">ROS2 Interface</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../simulation/">Simulation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../atseaoperation/">At Sea Operation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../tutorials/">Tutorials</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../resources/">Resources</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../theory/">Theory</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../license/">License</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../../../citation/">How to Cite</a>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../..">MBARI-WEC</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../.." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>Quick Start -- Writing External Controller With Github Template Repository</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="quick-start-writing-external-controller-with-github-template-repository">Quick Start -- Writing External Controller With Github Template Repository</h1>
<p>=========================================================================</p>
<p>There are two github
<a href="https://docs.github.com/en/repositories/creating-and-managing-repositories/creating-a-repository-from-a-template">template repositories</a>
set up (cpp/python) for a quick start on writing a
custom controller utilizing
<a href="https://github.com/osrf/buoy_msgs/tree/main/buoy_api_cpp">buoy_api_cpp</a> and
<a href="https://github.com/osrf/buoy_msgs/tree/main/buoy_api_py">buoy_api_py</a>. Please see
<a href="https://github.com/osrf/buoy_msgs/tree/main/buoy_api_cpp/examples">cpp examples</a> and
<a href="https://github.com/osrf/buoy_msgs/tree/main/buoy_api_py/examples">python examples</a> for example
controller implementations.</p>
<ul>
<li><a href="https://github.com/mbari-org/mbari_wec_template_cpp">mbari_wec_template_cpp</a></li>
<li><a href="https://github.com/mbari-org/mbari_wec_template_py">mbari_wec_template_py</a></li>
</ul>
<h2 id="using-python-template">Using Python Template</h2>
<h3 id="creating-your-own-repo-from-the-template">Creating your own repo from the template</h3>
<p>You may also refer to Github's
<a href="https://docs.github.com/en/repositories/creating-and-managing-repositories/creating-a-repository-from-a-template">template documentation</a></p>
<p>To start using the python Github template
1. navigate to
<a href="https://github.com/mbari-org/mbari_wec_template_py">mbari_wec_template_py</a> and click the green
button with the text <code>Use this template</code> and select <code>Create a new repository</code>
<img alt="use_this_template" src="Tutorials/ROS2/resources/use_this_template.png" /></p>
<ol>
<li>
<p>Next, set up the repository like you would any new Github repository choosing the owner,
repository name, public/private, etc.</p>
</li>
<li>
<p>Now that your new repository is set up, clone it to your local machine, make a branch, etc.</p>
</li>
</ol>
<p><code>$ git clone https://github.com/&lt;owner&gt;/&lt;repo_name&gt;.git</code></p>
<p>You should now have a python ROS2 package with the following structure:</p>
<pre><code>&lt;repo_name&gt;
    ├── config
    │   └── controller.yaml
    ├── launch
    │   └── controller.launch.py
    ├── LICENSE
    ├── mbari_wec_template_py
    │   ├── controller.py
    │   └── __init__.py
    ├── package.xml
    ├── README.md
    ├── resource
    │   └── mbari_wec_template_py
    ├── setup.cfg
    ├── setup.py
    └── test
        ├── test_copyright.py
        ├── test_flake8.py
        └── test_pep257.py
</code></pre>
<h3 id="customizing-the-controller">Customizing the controller</h3>
<p>You may also refer to the <code>README.md</code> in your newly cloned repository.</p>
<h4 id="modify-template-for-your-package">Modify template for your package</h4>
<p>Replace <code>mbari_wec_template_py</code> with your package name in</p>
<ul>
<li>package.xml</li>
</ul>
<pre>
<code>
&lt;?xml version="1.0"?&gt;
&lt;?xml-model href="http://download.ros.org/schema/package_format3.xsd" schematypens="http://www.w3.org/2001/XMLSchema"?&gt;
&lt;package format="3"&gt;
  &lt;name&gt;<b>repo_name</b>&lt;/name&gt;
  &lt;version&gt;<b>3.14</b>&lt;/version&gt;
  &lt;description&gt;<b>Your Controller Description</b>&lt;/description&gt;
  &lt;maintainer email="<b>your@email</b>"&gt;<b>Your Name</b>&lt;/maintainer&gt;
  &lt;license&gt;<b>Your License</b>&lt;/license&gt;
</code>
</pre>

<ul>
<li>setup.py</li>
</ul>
<pre>
<code>
package_name = <b>'your_package_name'</b>

setup(
    name=package_name,
    version=<b>'3.14'</b>,
    packages=[f'{package_name}'],
    data_files=[
        ('share/ament_index/resource_index/packages',
            ['resource/' + package_name]),
        ('share/' + package_name, ['package.xml']),
        (os.path.join('share', package_name, 'launch'), glob('launch/*.launch.py')),
        (os.path.join('share', package_name, 'config'), glob('config/*.yaml'))
    ],
    install_requires=['setuptools'],
    zip_safe=True,
    maintainer=<b>'Your Name'</b>,
    maintainer_email=<b>'your@email'</b>,
    description=<b>'Your package description'</b>,
    license=<b>'Your License'</b>,
    tests_require=['pytest'],
    entry_points={
        'console_scripts': [
            f'<b>your_controller_name</b> = {package_name}.controller:main',
</code>
</pre>

<ul>
<li>setup.cfg</li>
</ul>
<pre>
<code>
[develop]
script_dir=$base/lib/<b>your_package_name</b>
[install]
install_scripts=$base/lib/<b>your_package_name</b>
</code>
</pre>

<ul>
<li>launch/controller.launch.py</li>
</ul>
<pre>
<code>
package_name = <b>'your_package_name'</b>

def generate_launch_description():
    ld = LaunchDescription()
    config = os.path.join(
        get_package_share_directory(package_name),
        'config',
        'controller.yaml'
        )

    node = Node(
        package=package_name,
        name=<b>'your_controller_name'</b>,
        executable=<b>'your_controller_name'</b>,
</code>
</pre>

<p>and rename two files/folders</p>
<ul>
<li>the empty file resource/mbari_wec_template_py</li>
<li>the python package <code>mbari_wec_template_py</code> containing <code>controller.py</code></li>
</ul>
<p>resulting in the following folder structure:</p>
<pre>
<code>
<b>repo_name</b>
    ├── config
    │   └── controller.yaml
    ├── launch
    │   └── controller.launch.py
    ├── LICENSE
    ├── <b>your_package_name</b>
    │   ├── controller.py
    │   └── __init__.py
    ├── package.xml
    ├── README.md
    ├── resource
    │   └── <b>your_package_name</b>
    ├── setup.cfg
    ├── setup.py
    └── test
        ├── test_copyright.py
        ├── test_flake8.py
        └── test_pep257.py
</code>
</pre>

<p>Modify <code>setup.py</code> as desired and add any dependencies in <code>package.xml</code> following standard ROS2
documentation.</p>
<h4 id="implement-controller">Implement Controller</h4>
<p>Assuming you have followed the above and renamed the python package <code>mbari_wec_template_py</code> to your package name,
<code>&lt;your_package_name&gt;/controller.py</code> is stubbed out to implement your custom external controller.</p>
<p>You may also use <code>config/controller.yaml</code> for any policy parameters.
If you modify the controller node name, i.e. <code>super().__init__('controller')</code> and the <code>name</code> field of <code>Node</code> in the launch file,
please be sure to update the first line of the <code>config/controller.yaml</code> file and to use the same node name.</p>
<p>Also, if you choose a more specific name for your controller,
consider renaming:</p>
<ul>
<li><code>launch/controller.launch.py</code></li>
<li><code>config/controller.yaml</code></li>
<li><code>&lt;your_package_name&gt;/controller.py</code></li>
</ul>
<p>and update:</p>
<ul>
<li><code>console_scripts</code> in <code>setup.py</code></li>
<li><code>executable</code> field of <code>Node</code> in <code>launch/controller.launch.py</code></li>
</ul>
<p>accordingly.</p>
              
            </div>
          </div><footer>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
    
  </span>
</div>
    <script>var base_url = '../../..';</script>
    <script src="../../../js/theme_extra.js" defer></script>
    <script src="../../../js/theme.js" defer></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" defer></script>
      <script src="../../../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
